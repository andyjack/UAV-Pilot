#!/usr/bin/perl
use v5.14;

my $PROMPT   = 'uav> ';
my $CONTINUE = 1;


sub print_prompt
{
    my ($prompt) = @_;
    print $prompt;
    return 1;
}

sub take_cmd
{
    my $cmd = <>;
    chomp $cmd;
    return $cmd;
}

sub save_cmd_to_history
{
    my ($cmd) = @_;
    # TODO
    return 1;
}

sub run_cmd
{
    my ($cmd) = @_;
    my $return = 1;
    if( $cmd =~ /\A(?: exit | quit | q )\z/x ) {
        $return = 0;
    }
    else {
        save_cmd_to_history( $cmd );
        # TODO
    }

    return $return;
}


{
    my $continue = 1;
    while( $continue ) {
        print_prompt( $PROMPT );
        my $cmd = take_cmd();
        $continue = run_cmd( $cmd );
    }
}
